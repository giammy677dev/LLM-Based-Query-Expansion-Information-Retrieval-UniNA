<!DOCTYPE html>
<html>
<head>
  <title>Progetto di Information Retrieval</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="bridge.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>
<body>
  <h1>Progetto di Information Retrieval</h1>
  <h2>Query Expansion tramite l'utilizzo di ChatGPT</h2>
  <div class="search-bar">
    <select id="queryMenu"></select>
    <button id= "searchButton" onclick="doSearch()">Cerca</button>
  </div>

  <div class="container">
    <div class="column-noGPT">
      <canvas id="noGPTChart"></canvas>
      <h3 id="noGPTTitle"></h3>
      <div id="searchResults"></div>
    </div>
    <div class="column-GPT">
      <canvas id="GPTChart"></canvas>
      <h3 id="GPTTitle"></h3>
      <div id="searchResultsChatGPT"></div>
      <div class="loader-container">
        <div id="loader" style="display: none;"></div>
        <div id="loading" style="display: none;"><p>Comunicando con ChatGPT...</p></div>
    </div>
  </div>

  <script>
    fetch('src/main/java/com/example/solrplugin/utils/query.json')
      .then(function(response) {
        return response.json();
      })
      .then(function(data) {
        var queryMenu = document.getElementById("queryMenu");
        data.forEach(function(option) {
          var optionElement = document.createElement("option");
          optionElement.value = option.id;
          optionElement.innerText = option.text;
          queryMenu.appendChild(optionElement);
        });
      })
      .catch(function(error) {
        console.error(error);
      });
  </script>
</body>
</html>
